# Works to make 4 VMs

i: 1

driver:
  name: vagrant
  network:
    - ["public_network"]
  customize:
    memory: 1024

provisioner:
  name: chef_zero
  product_name: chef
  product_version: 14.12.9

verifier:
  name: inspec

platforms:
  - name: centos-7

suites:
  <% (1..Time.now.month).each do |i| %>
  - name: Satellite_Teminal_Server_<%= i %>
    driver:
      vm_hostname: "SAT.<%= i %>.SAd-INC.com"
    run_list:
      - recipe[D085::SAT]
    attributes:

  - name: Web_Server_<%= i %>
    driver:
      vm_hostname: "WEB.<%= i %>.SAd-INC.com"
    run_list:
      - recipe[D085::WEB]
    attributes:

  - name: Time_Server_<%= i %>
    driver:
      vm_hostname: "TIME.<%= i %>.SAd-INC.com"
    run_list:
      - recipe[D085::TIME]
    attributes:

  - name: Database_Server_<%= i %>
    driver:
      vm_hostname: "DB.<%= i %>.SAd-INC.com"
    run_list:
      - recipe[D085::DB]
    attributes:
  <% end %>
